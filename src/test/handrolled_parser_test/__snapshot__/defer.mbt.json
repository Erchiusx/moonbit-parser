{
  "type": "Program",
  "body": [
    {
      "type": "Impl::TopTest",
      "expr": {
        "type": "Expr::Defer",
        "expr": {
          "type": "Expr::Ident",
          "id": {
            "type": "Var",
            "name": {
              "type": "LongIdent::Ident",
              "0": "x"
            },
            "loc": "2:9-2:8"
          },
          "loc": "2:9-2:8"
        },
        "body": {
          "type": "Expr::Defer",
          "expr": {
            "type": "Expr::Apply",
            "func": {
              "type": "Expr::Ident",
              "id": {
                "type": "Var",
                "name": {
                  "type": "LongIdent::Ident",
                  "0": "simple"
                },
                "loc": "3:9-3:8"
              },
              "loc": "3:9-3:8"
            },
            "args": [],
            "attr": {
              "type": "ApplyAttr::NoAttr"
            },
            "loc": "3:9-3:16"
          },
          "body": {
            "type": "Expr::Defer",
            "expr": {
              "type": "Expr::DotApply",
              "self": {
                "type": "Expr::Ident",
                "id": {
                  "type": "Var",
                  "name": {
                    "type": "LongIdent::Ident",
                    "0": "socket"
                  },
                  "loc": "4:9-4:8"
                },
                "loc": "4:9-4:8"
              },
              "method_name": {
                "type": "Label",
                "name": "close",
                "loc": "4:16-4:21"
              },
              "args": [],
              "return_self": false,
              "attr": {
                "type": "ApplyAttr::NoAttr"
              },
              "loc": "4:9-4:22"
            },
            "body": {
              "type": "Expr::Defer",
              "expr": {
                "type": "Expr::DotApply",
                "self": {
                  "type": "Expr::DotApply",
                  "self": {
                    "type": "Expr::Ident",
                    "id": {
                      "type": "Var",
                      "name": {
                        "type": "LongIdent::Ident",
                        "0": "conn"
                      },
                      "loc": "5:9-5:8"
                    },
                    "loc": "5:9-5:8"
                  },
                  "method_name": {
                    "type": "Label",
                    "name": "send_farewell",
                    "loc": "5:15-5:28"
                  },
                  "args": [],
                  "return_self": true,
                  "attr": {
                    "type": "ApplyAttr::NoAttr"
                  },
                  "loc": "5:9-5:29"
                },
                "method_name": {
                  "type": "Label",
                  "name": "close",
                  "loc": "5:31-5:36"
                },
                "args": [],
                "return_self": false,
                "attr": {
                  "type": "ApplyAttr::NoAttr"
                },
                "loc": "5:9-5:37"
              },
              "body": {
                "type": "Expr::Defer",
                "expr": {
                  "type": "Expr::Pipe",
                  "lhs": {
                    "type": "Expr::Ident",
                    "id": {
                      "type": "Var",
                      "name": {
                        "type": "LongIdent::Ident",
                        "0": "x"
                      },
                      "loc": "6:9-6:8"
                    },
                    "loc": "6:9-6:8"
                  },
                  "rhs": {
                    "type": "Expr::Ident",
                    "id": {
                      "type": "Var",
                      "name": {
                        "type": "LongIdent::Ident",
                        "0": "f"
                      },
                      "loc": "6:14-6:13"
                    },
                    "loc": "6:14-6:13"
                  },
                  "loc": "6:9-6:13"
                },
                "body": {
                  "type": "Expr::Defer",
                  "expr": {
                    "type": "Expr::Group",
                    "expr": {
                      "type": "Expr::Sequence",
                      "exprs": [
                        {
                          "type": "Expr::Apply",
                          "func": {
                            "type": "Expr::Ident",
                            "id": {
                              "type": "Var",
                              "name": {
                                "type": "LongIdent::Ident",
                                "0": "block"
                              },
                              "loc": "8:5-7:11"
                            },
                            "loc": "8:5-7:11"
                          },
                          "args": [],
                          "attr": {
                            "type": "ApplyAttr::NoAttr"
                          },
                          "loc": "8:5-8:11"
                        }
                      ],
                      "last_expr": {
                        "type": "Expr::Apply",
                        "func": {
                          "type": "Expr::Ident",
                          "id": {
                            "type": "Var",
                            "name": {
                              "type": "LongIdent::Ident",
                              "0": "block"
                            },
                            "loc": "9:5-8:13"
                          },
                          "loc": "9:5-8:13"
                        },
                        "args": [],
                        "attr": {
                          "type": "ApplyAttr::NoAttr"
                        },
                        "loc": "9:5-9:11"
                      },
                      "loc": "8:5-9:11"
                    },
                    "group": {
                      "type": "Group::Brace"
                    },
                    "loc": "7:9-6:16"
                  },
                  "body": {
                    "type": "Expr::Unit",
                    "loc": "7:3-9:13",
                    "faked": true
                  },
                  "loc": "7:9-9:13"
                },
                "loc": "6:9-6:13"
              },
              "loc": "5:9-5:37"
            },
            "loc": "4:9-4:22"
          },
          "loc": "3:9-3:16"
        },
        "loc": "2:9-2:8"
      },
      "name": null,
      "params": null,
      "local_types": [],
      "loc": "1:1-10:5",
      "attrs": [],
      "doc": ""
    }
  ]
}